[["formaty-danych.html", "Formaty danych 1 Formaty danych 1.1 CSV/DSV 1.2 XML 1.3 JSON 1.4 Excel (XLSX) 1.5 Otwarte wersje programu Excel", " Formaty danych 1 Formaty danych 1.1 CSV/DSV CSV (Comma Separated Values) to plik tekstowy, w którym wartoci rozdzielane s przecinkami, a kolejne wiersze znakiem nowej linii. Plik CSV zazwyczaj przechowuje dane tabelaryczne. Nagówki kolumn s czsto doczane jako pierwszy wiersz (s to nazwy zmiennych), a kady kolejny wiersz odpowiada jednej obserwacji (jednemu wierszowi w tabeli danych). CSV jest szczególnym przypadkiem formatu danych o nazwie Delimiter Seperated Values (DSV). Jest to plik tekstowy w którym pola w kadym wierszu oddzielone s dowolnym separatorem. Najczciej spotykane separatory to: przecinek (CSV), tabulator (TSV), rednik. 1.1.0.1 Przykadowy plik CSV 1.2 XML XML to skrót od nazwy Extensible Markup Language. Dane przechowywane w tym formacie maj zagniedon struktur: znaczniki oznaczaj nazwy zmiennych, a wewntrz przechowywane s ich wartoci. XML swoj struktur przypomina plik HTML. 1.2.0.1 Przykadowy plik XML 1.3 JSON JSON - JavaScript Object Notation - to format przydatny w przypadku pracy z danymi pochodzcymi z REST API, czyli pobieranymi z sieci. Niektóre bazy danych równie komunikuj si za pomoc tego formatu, np. MongoDB. Struktura: w pliku JSON obserwacje przechowywane s w sownikach, w których nazwy zmiennych s kluczami, a wartoci zmiennych - wartociami. Obserwacje oddzielane s przecinkami, a dodatkowo, wszystkie dane spite s nawiasami klamrowymi. 1.3.0.1 Przykadowy plik JSON 1.4 Excel (XLSX) XLSX to format danych oparty na XML. Pliki tego typu s domylnymi dokumentami wyjciowymi arkuszy kalkulacyjnych programu Microsoft Excel. Przedstawiaj one gównie dane liczbowe i tekstowe w postaci tabel dwuwymiarowych. 1.4.0.1 Przykadowy arkusz kalkulacyjny w Excelu 1.5 Otwarte wersje programu Excel Istniej inne pakiety biurowe, np. LibreOffice, które - w przeciwiestwie do Excela - pozwalaj na darmowe korzystanie z arkusza kalkulacyjnego. W przypadku LibreOffice, domylnym formatem zapisu danych przez Calc (odpowiednik Excela) jest OpenDocument Format (.ods). 1.5.0.1 Przykadowy arkusz kalkulacyjny w LibreOffice "],["locale.html", "2 Locale 2.1 Ustawienie locale przez uytkownika 2.2 Ustawienie locale poprzez readr", " 2 Locale Locale jest to uniksowe narzdzie powokowe przechowujce ustawienia rodowiskowe zwizane z ustawieniami regionalnymi. Sys.getlocale() ## [1] &quot;LC_COLLATE=Polish_Poland.1250;LC_CTYPE=Polish_Poland.1250;LC_MONETARY=Polish_Poland.1250;LC_NUMERIC=C;LC_TIME=Polish_Poland.1250&quot; LC_COLLATE - odpowiada za porzdek znaków, wany przy sortowaniu LC_CTYPE - odpowiada za kodowanie znaków LC_MONETARY - odpowiada za system monetarny: znak waluty, separator tysicy, liczba cyfr po przecinku itd. LC_NUMERIC - okrela separator uamkowy, separator tysicy, grupowanie cyfr LC_TIME - odpowiada za system wywietlania daty Sys.localeconv() ## decimal_point thousands_sep grouping int_curr_symbol ## &quot;.&quot; &quot;&quot; &quot;&quot; &quot;PLN&quot; ## currency_symbol mon_decimal_point mon_thousands_sep mon_grouping ## &quot;z&quot; &quot;,&quot; &quot; &quot; &quot;\\003&quot; ## positive_sign negative_sign int_frac_digits frac_digits ## &quot;&quot; &quot;-&quot; &quot;2&quot; &quot;2&quot; ## p_cs_precedes p_sep_by_space n_cs_precedes n_sep_by_space ## &quot;0&quot; &quot;1&quot; &quot;0&quot; &quot;1&quot; ## p_sign_posn n_sign_posn ## &quot;1&quot; &quot;1&quot; Powysza funkcja wywietla szczegóy dotyczce systemu numerycznego i monetarnego. 2.1 Ustawienie locale przez uytkownika Sys.setlocale(category = &quot;LC_ALL&quot;, locale = &quot;polish&quot;) ## [1] &quot;LC_COLLATE=Polish_Poland.1250;LC_CTYPE=Polish_Poland.1250;LC_MONETARY=Polish_Poland.1250;LC_NUMERIC=C;LC_TIME=Polish_Poland.1250&quot; W celu ustawienia innego locale ni domylne systemowe naley uy powyszej funkcji, przyjmowane przez ni argumenty to category i locale. category - odpowiada za okrelenie, które zmienne rodowiskowe chcemy zmieni, gdzie opcje: LC_ALL, LC_COLLATE, LC_CTYPE, LC_MONETARY, LC_NUMERIC oraz LC_TIME s wspierane na kadym systemie operacyjnym, niektóre systemy wspieraj równie: LC_MESSAGES, LC_PAPER i LC_MEASUREMENT locale - odpowiada za region, który chcemy ustawi dla systemu windows podajemy angielsk nazw jzyka (regionu) np.: polish, w systemach UNIXowych podajemy np.: pl_PL lub pl_PL.UTF-8. 2.2 Ustawienie locale poprzez readr Pakiet readr oferuje wicej moliwoci dostosowywania locale, wicej informacji na ten temat mona znale w tym odnoniku. "],["formaty-danych-w-r.html", "3 Formaty danych w R 3.1 Natywne formaty R 3.2 RDS 3.3 RDA", " 3 Formaty danych w R 3.1 Natywne formaty R R ma dwa natywne sposoby przechowywania danych, RDA(od RData) i RDS. Gówn zalet takiej obsugi danych jest szybko przetwarzania ich. Zachowuje on take informacje z R o danych(np. typy zmiennych). 3.2 RDS W formacie RDS mog by przechowywane jedynie pojedyncze pliki R. Mog by one za to przypisywane do dowolnej nazwy. Aby zaadowa dane korzystamy z: listings_rds &lt;- readRDS(&quot;./data/native/listings.rds&quot;) Do zapisania danych uywamy: saveRDS(object = listings, file = &quot;listings.rds&quot;) 3.3 RDA W plikach formatu RDA wczytane dane nie s przypisywane do zmiennej, tylko wywoujemy te funkcje i w efekcie plik pojawia si w rodowisku. W RDA do zaadowania danych suy load(&quot;./data/native/listings.rda&quot;) Natomiast, aby zapisa dane uywamy: save(listings_rr, file = &quot;listings_rr.rda&quot;) Korzystajc z formatu RDA moemy jednoczenie zapisywa wiksz ilo plików save(iris, cars, file=&quot;data_frame.rda&quot;) "],["wczytywanie-danych-w-r.html", "4 Wczytywanie danych w R 4.1 Pliki tekstowe 4.2 Arkusze kalkulacyjne i pliki JSON", " 4 Wczytywanie danych w R 4.1 Pliki tekstowe Jednym z najczciej wystpujcych i najbardziej uniwersalnych formatów przechowujce dane (np. w postaci tabeli) s pliki tekstowe. Maj one najczciej rozszerzenie txt lub csv ( coma separeted value). Ponisz charakteryzacje rónych metod wczytywania przedstawiamy na podstawie pliku listings.csv 4.1.1 Base Podstawow funkcj uywan do wczytywania tego typu plików w postaci tabeli jest funkcja read.table. Ze wzgldu na specyfikacj wewntrzn plikóW, read.table posiada kilka wariantów, takie jak read.csv(), read.csv2() czy read.delim(). read.csv() uywana jest w przypadku, gdy domylnym separatorem dziesitnym jest ., a wartoci w wierszach oddzielone s poprzez ,; read.csv2() uywana jest w przyoadku, gdy domylnym separatorem dziesitnym jest ,, a wartoci w wierszach oddzielone s poprzez ;; read.delim() uywana jest w przypadku, gdy domylnym separatorem dziesitnym jest ., a wartoci w wierszach oddzielone s poprzez TAB Przykadowy sposób zaadowania plików w formacie csv read.csv(&#39;./data/csv/listings.csv&#39;, header = TRUE, sep = &quot;,&quot;) W przypadku read.table() dane zostaj zaimportowane jako data.frame. Dla duych plików wczytwanie za pomoc read.table() bywa jednak czasochonne. Wówczas moemy uy funkcji z paczki data.table lub readr. 4.1.2 readr readr jest czci pakietu tidyverse. W tym przypadku import odbywa si za pomoc funkcji o podobnej nazwie, jak w przypadku read.table(), a mianowicie read_csv(). read_csv wczytuje dane oddzielone przecinkami, natomiast read_csv2() - dane oddzielone rednikami. read_csv(&#39;./data/csv/listings.csv&#39;) W przeciwiestwie do read.csv, funkcja read_csv na wyjciu daje dane w postaci tabeli w bardziej zwartej i przejrzystej formie. Oprócz tego podaje take specyfikacj kolumn, tzn. informuje, jaka jest nazwa kadej kolumny oraz jej typ (np. col_double () oznaczaj dane liczbowe). Typ danych jaki dostajemy na wyjciu to tbl_df (tzw. tibble), który jest w pewnym sensie zmodyfikowan wersj tradycyjnej ramki danych data.frame, pozwalajc na atwiejsz prac w obrbie tidyverse. 4.1.3 data.table Do wczytywania danych z plików csv moemy take uy funkcji fread z pakietu data.table. fread(&#39;./data/csv/listings.csv&#39;) Na wyjciu otrzymujemy ramk danych, jednak wywietlon w inny sposób ni w przypadku uycia read.csv. Rónica jest widoczna, gdy po uyciu funkcji class() na fread() jako typ danych otrzymujemy \"data.table\" \"data.frame\". 4.1.4 Rónice Najwaniejsze rónice pomidzy wymienionymi sposobami wczytywania plików csv to: Typ danych Base: `data.frame readr: tibble data.table: `data.table data.frame Posta wywietlania (co jest konsekwencj 1) Base: Wywietla 62 pocztkowe wiersze kadej kolumny, wywietlajc informacje o liczbie pozostaych; readr: wywietle 10 pierwszych wierszy z 10 pierwszych kolumn, z informacj o liczbie pozostaych wierszy i kolumn; automatycznie wywietlane s te nazwy kolumn oraz skrót informujcy o typie zmiennych data.table: wywietla 5 pocztkowych i 5 kocowych wartoci z kadej kolumny Czas i uycie pamici przy duych rozmiarach danych Zarówno czas wczytania danych, jak i wykorzystanie pamici najkorszytniejsze jest w przypadku funkcji fread. Gdyby przez time oznaczy czas potrzebny na wczytanie duych plików, a przez memory zuycie pamici, to time(fread) &lt; time(read_csv) &lt;&lt; time(read.csv) oraz memory(fread) &lt; memory(read.csv) &lt; memory(read_csv). 4.2 Arkusze kalkulacyjne i pliki JSON Do wczytywania arkusza kalkulacyjnego (np. pliku excela) uywa si funkcji read_excel z pakietu readxl bdcego czci tidyverse. read_excel(&#39;./data/excel/listings.xlsx&#39;) Oprócz tego, mona take uy pakietu funkcji read.xlsx z pakietu xlsx. Wymaga ona jednak instalacji javy. Do zaimportowania plików JSON moemy uy funkcji z pakietu jsonlite listings_js &lt;- jsonlite::fromJSON(&#39;./data/json/listings.json&#39;) listings_js &lt;- mutate(listings_js, last_review = as_date(last_review)) "]]
